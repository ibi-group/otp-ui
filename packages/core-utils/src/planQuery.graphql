#import "./fragments.graphql"

query Plan(
  $arriveBy: Boolean
  $banned: InputBanned
  $bikeReluctance: Float
  $carReluctance: Float
  $date: String
  $fromPlace: String!
  $modes: [TransportMode]
  $numItineraries: Int
  $preferred: InputPreferred
  $time: String
  $toPlace: String!
  $unpreferred: InputUnpreferred
  $walkReluctance: Float
  $walkSpeed: Float
  $wheelchair: Boolean
) {
  plan(
    arriveBy: $arriveBy
    banned: $banned
    bikeReluctance: $bikeReluctance
    carReluctance: $carReluctance
    date: $date
    fromPlace: $fromPlace
    # Currently only supporting EN locale, used for times and text
    locale: "en"
    numItineraries: $numItineraries
    preferred: $preferred
    time: $time
    toPlace: $toPlace
    transportModes: $modes
    unpreferred: $unpreferred
    walkReluctance: $walkReluctance
    walkSpeed: $walkSpeed
    wheelchair: $wheelchair
  ) {
    itineraries {
      accessibilityScore
      duration
      endTime
      legs {
        accessibilityScore
        agency {
          ...AgencyFields
        }
        arrivalDelay
        departureDelay
        distance
        dropoffType
        duration
        endTime
        fareProducts {
          id
          product {
            __typename
            id
            medium {
              id
              name
            }
            name
            riderCategory {
              id
              name
            }
            ... on DefaultFareProduct {
              price {
                amount
                currency {
                  code
                  digits
                }
              }
            }
          }
        }
        from {
          ...FromToFields
        }
        headsign
        interlineWithPreviousLeg
        intermediateStops {
          ...StopFields
        }
        legGeometry {
          length
          points
        }
        mode
        pickupBookingInfo {
          earliestBookingTime {
            daysPrior
          }
        }
        pickupType
        realTime
        realtimeState
        rentedBike
        rideHailingEstimate {
          ...RideHailingEstimateFields
        }
        route {
          ...RouteFields
        }
        startTime
        steps {
          absoluteDirection
          alerts {
            alertDescriptionText
            alertHeaderText
            alertUrl
            effectiveStartDate
            id
          }
          area
          distance
          elevationProfile {
            distance
            elevation
          }
          lat
          lon
          relativeDirection
          stayOn
          streetName
        }
        to {
          ...FromToFields
        }
        transitLeg
        trip {
          arrivalStoptime {
            stop {
              ...StopFields
            }
            stopPosition
          }
          departureStoptime {
            stop {
              ...StopFields
            }
            stopPosition
          }
          gtfsId
          id
        }
      }
      startTime
      waitingTime
      walkTime
    }
    routingErrors {
      code
      description
      inputField
    }
  }
}
